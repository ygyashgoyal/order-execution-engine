{
  "info": {
    "_postman_id": "f7a9b8d2-3b28-4f77-9b0a-2c6a9f1a4f6e",
    "name": "Order Execution Engine - API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Collection for Order Execution Engine — POST create order, check invalid request, and GET order by id (optional). Create WebSocket manually in Postman Desktop: ws://{{base_url_host}}:{{base_url_port}}/api/orders/execute?orderId={{orderId}}"
  },
  "item": [
    {
      "name": "1 - Create Order (POST /api/orders/execute)",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"tokenIn\": \"SOL\",\n  \"tokenOut\": \"USDC\",\n  \"amount\": 10\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/orders/execute",
          "host": ["{{base_url}}"],
          "path": ["api", "orders", "execute"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "  try {",
              "    const json = pm.response.json();",
              "    if (json.orderId) {",
              "      pm.environment.set('orderId', json.orderId);",
              "      console.log('✅ Saved orderId to environment:', json.orderId);",
              "    }",
              "  } catch (e) { console.log('Could not parse response'); }",
              "}"
            ]
          }
        }
      ],
      "response": []
    },
    {
      "name": "2 - Create Invalid Order (POST /api/orders/execute) -> 400",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"tokenIn\": \"SOL\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/orders/execute",
          "host": ["{{base_url}}"],
          "path": ["api", "orders", "execute"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('status is 400', function() {",
              "  pm.expect(pm.response.code).to.eql(400);",
              "});"
            ]
          }
        }
      ],
      "response": []
    },
    {
      "name": "3 - Get Order by ID (GET /api/orders/:id) (optional)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/orders/{{orderId}}",
          "host": ["{{base_url}}"],
          "path": ["api", "orders", "{{orderId}}"]
        }
      },
      "event": [],
      "response": []
    },
    {
      "name": "4 - Manual: WebSocket (see instructions)",
      "request": {
        "method": "GET",
        "url": {
          "raw": "MANUAL: Create a WebSocket in Postman Desktop: ws://{{ws_host}}:{{ws_port}}/api/orders/execute?orderId={{orderId}}"
        }
      },
      "response": [],
      "description": "Postman Desktop: New -> WebSocket Request -> ws://{{ws_host}}:{{ws_port}}/api/orders/execute?orderId={{orderId}}. Connect after creating order to see statuses: connected -> pending -> routing -> building -> submitted -> confirmed/failed"
    }
  ]
}
